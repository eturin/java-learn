// ./gradlew generateProto

syntax = "proto3";

package users;

option java_package = "ture.app.users";
option java_multiple_files = true;

// запрос получения всех пользователей
// запрос получения пользователя по ID
// запрос получения пользователя по имени
// запрос получения пользователя по email
// запрос создания нового пользователя
// запрос обновления имени пользователя
// запрос обновления email пользователя
// запрос удаления пользователя
// запрос получения счетов пользователя
// запрос изменения названия счёта
// запрос создания нового счёта

// ответ со сведениями обо всех пользователях
message Users {
  repeated User users = 1;       // Пользователи
  Status status = 2;             // Статус
  string error_message = 3;      // Сообщение об ошибки
}
// ответ со сведениями о пользователе
message UserResp {
  Status status = 1;             // Статус
  oneof resp {
    User user = 2;               // Сведения о пользователе
    string error_message = 3;    // Сообщение об ошибки
  }
}
message User {
  int64 id = 1;                  // ID пользователя
  string name = 2;               // Имя пользователя
  string email = 3;              // Email
  string created_at = 4;         // Дата создания
  repeated Account accounts = 5; // Счета
}
// ответ со сведениями обо всех счетах пользователя
message Accounts {
  Status status = 1;             // Статус
  int64 user_id = 2;             // ID пользователя
  oneof resp {
    AccountsList accounts = 3;   // Счета
    string error_message = 4;    // Сообщение об ошибки
  }
}
// ответ со сведениями о счёте
message AccountResp {
  Status status = 1;        // Статус
  oneof resp {
    Account account = 2;      // Сведения о счёте
    string error_message = 3; // Сообщение об ошибки
  }
}
message AccountsList {
  int64 user_id = 1;             // ID пользователя
  repeated Account accounts = 2; // Счета
}
message Account {
  int64 id = 1;             // ID счёта
  int64 user_id = 2;      // ID пользователя
  string name = 3;          // Наименование счёта
  string amount = 4;        // Остаток
  string created_at = 5;    // Дата создания
  string blocked_at = 6;    // Дата блокировки
  string closed_at = 7;     // Дата закрытия
}

enum Status {
  SUCCESS = 0;
  FAILED = 1;
}